<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tools - UMKM Marketing Assistant</title>
    <meta name="description" content="Tools AI untuk konten marketing UMKM">
    
    <!-- CSS -->
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/ai-tools.css">
    
    <!-- Font Inter & Poppins dari Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard-body">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1 class="sidebar-logo">
                ü§ñ AI UMKM
            </h1>
            <button class="sidebar-close" id="sidebar-close">‚úï</button>
        </div>
        
        <nav class="sidebar-nav">
            <a href="index.html" class="sidebar-link">
                <span class="sidebar-icon">üè†</span>
                <span class="sidebar-text">Home</span>
            </a>
            <a href="dashboard.html" class="sidebar-link">
                <span class="sidebar-icon">üìä</span>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="products.html" class="sidebar-link">
                <span class="sidebar-icon">üì¶</span>
                <span class="sidebar-text">Produk</span>
            </a>
            <a href="ai-tools.html" class="sidebar-link active">
                <span class="sidebar-icon">‚ú®</span>
                <span class="sidebar-text">AI Tools</span>
            </a>
            <a href="ai-tools.html#ideas" class="sidebar-link sub">
                <span class="sidebar-icon">üí°</span>
                <span class="sidebar-text">Ide Konten</span>
            </a>
            <a href="ai-tools.html#caption" class="sidebar-link sub">
                <span class="sidebar-icon">‚úçÔ∏è</span>
                <span class="sidebar-text">Caption AI</span>
            </a>
            <a href="ai-tools.html#poster" class="sidebar-link sub">
                <span class="sidebar-icon">üé®</span>
                <span class="sidebar-text">Design Poster</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">üë§</div>
                <div class="user-details">
                    <p class="user-name">Demo User</p>
                    <p class="user-role">UMKM Owner</p>
                </div>
            </div>
            <button class="btn-logout">Logout</button>
        </div>
    </aside>

    <!-- Mobile Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Main Content Area -->
    <div class="main-wrapper">
        
        <!-- Top Header (Mobile) -->
        <header class="top-header">
            <button class="sidebar-toggle" id="sidebar-toggle">‚ò∞</button>
            <h2 class="page-title">‚ú® AI Marketing Tools</h2>
            <div class="header-actions">
                <button class="btn btn-small btn-primary" onclick="location.href='products.html'">
                    üì¶ Produk
                </button>
            </div>
        </header>

        <!-- AI Tools Main Content -->
        <main class="dashboard-content">
            
            <!-- AI Tools Header -->
            <section class="tools-header">
                <h1 class="page-title">ü§ñ AI Marketing Tools</h1>
                <p class="page-description">Pilih tools AI yang ingin Anda gunakan untuk membuat konten promosi</p>
            </section>

            <!-- AI Tools Grid -->
            <section class="tools-grid">
                
                <!-- Ide Konten AI -->
                <div class="tool-card" onclick="loadAITool('ideas')">
                    <div class="tool-icon">üí°</div>
                    <h2 class="tool-title">Ide Konten AI</h2>
                    <p class="tool-description">
                        Generate ide konten promosi kreatif berdasarkan jenis usaha dan target audience Anda.
                    </p>
                    <div class="tool-features">
                        <span class="feature-tag">üì± Social Media</span>
                        <span class="feature-tag">üéØ Target Audience</span>
                        <span class="feature-tag">‚ö° Instant</span>
                    </div>
                    <button class="btn btn-primary tool-btn">
                        Mulai Generate Ide
                    </button>
                </div>

                <!-- Caption Generator -->
                <div class="tool-card" onclick="loadAITool('caption')">
                    <div class="tool-icon">‚úçÔ∏è</div>
                    <h2 class="tool-title">Caption Generator</h2>
                    <p class="tool-description">
                        Buat caption menarik untuk Instagram, Facebook, dan platform sosial media lainnya.
                    </p>
                    <div class="tool-features">
                        <span class="feature-tag">üìù Auto Caption</span>
                        <span class="feature-tag">#Ô∏è‚É£ Hashtags</span>
                        <span class="feature-tag">üé® Multiple Tone</span>
                    </div>
                    <button class="btn btn-primary tool-btn">
                        Buat Caption Sekarang
                    </button>
                </div>

                <!-- Poster Text Generator -->
                <div class="tool-card" onclick="loadAITool('poster')">
                    <div class="tool-icon">üé®</div>
                    <h2 class="tool-title">Poster Text Generator</h2>
                    <p class="tool-description">
                        Generate teks untuk poster promosi dengan layout dan hierarki yang menarik.
                    </p>
                    <div class="tool-features">
                        <span class="feature-tag">üéØ CTA Powerful</span>
                        <span class="feature-tag">üìê Layout Guide</span>
                        <span class="feature-tag">üé® Design Tips</span>
                    </div>
                    <button class="btn btn-primary tool-btn">
                        Design Poster Text
                    </button>
                </div>

            </section>

            <!-- Selected Product Info (if any) -->
            <div id="selected-product-info" class="selected-product hidden">
                <div class="product-info-card">
                    <h3>üîÑ Menggunakan Data Produk:</h3>
                    <div class="selected-product-details">
                        <span class="product-name" id="selected-product-name">-</span>
                        <span class="product-category" id="selected-product-category">-</span>
                    </div>
                    <button class="btn btn-small btn-secondary" onclick="clearSelectedProduct()">
                        ‚ùå Hapus Pilihan
                    </button>
                </div>
            </div>

            <!-- AI Tool Content Area -->
            <div id="ai-tool-content" class="tool-content hidden">
                <!-- Dynamic content will be loaded here -->
            </div>

        </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <p id="toast-message">Pesan</p>
    </div>

    <!-- JavaScript -->
    <script src="src/js/utils.js"></script>
    <script src="src/js/ai-products.js"></script>
    <script src="src/js/ai-ideas.js"></script>
    <script src="src/js/ai-caption.js"></script>
    <script src="src/js/ai-poster.js"></script>
    <script src="src/js/dashboard.js"></script>

    <script>
        // Fungsi sederhana untuk toggle sidebar (mobile)
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // AI Tools page functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners untuk sidebar
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebarClose = document.getElementById('sidebar-close');
            const sidebarOverlay = document.getElementById('sidebar-overlay');

            // Buka sidebar
            sidebarToggle.addEventListener('click', toggleSidebar);
            
            // Tutup sidebar
            sidebarClose.addEventListener('click', toggleSidebar);
            sidebarOverlay.addEventListener('click', toggleSidebar);
            
            checkSelectedProduct();
            checkURLFragment();
        });

        // Check if there's a selected product
        function checkSelectedProduct() {
            const selectedProduct = getSelectedProduct();
            const productInfo = document.getElementById('selected-product-info');
            
            if (selectedProduct && productInfo) {
                document.getElementById('selected-product-name').textContent = selectedProduct.name;
                document.getElementById('selected-product-category').textContent = selectedProduct.category;
                productInfo.classList.remove('hidden');
            }
        }

        // Check URL fragment for direct tool access
        function checkURLFragment() {
            const fragment = window.location.hash.replace('#', '');
            if (fragment && ['ideas', 'caption', 'poster'].includes(fragment)) {
                loadAITool(fragment);
            }
        }

        // Load specific AI tool
        async function loadAITool(toolType) {
            const contentArea = document.getElementById('ai-tool-content');
            const toolsGrid = document.querySelector('.tools-grid');
            
            try {
                // Show loading
                contentArea.innerHTML = '<div class="loading"><div class="spinner"></div><p>Memuat AI Tool...</p></div>';
                contentArea.classList.remove('hidden');
                
                // Hide tools grid
                toolsGrid.style.display = 'none';
                
                // Load appropriate page content
                let pageFile = '';
                switch(toolType) {
                    case 'ideas':
                        pageFile = 'src/pages/ideas.html';
                        break;
                    case 'caption':
                        pageFile = 'src/pages/caption.html';
                        break;
                    case 'poster':
                        pageFile = 'src/pages/poster.html';
                        break;
                    default:
                        throw new Error('Invalid tool type');
                }
                
                const response = await fetch(pageFile);
                const html = await response.text();
                contentArea.innerHTML = html;
                
                // Initialize appropriate tool
                switch(toolType) {
                    case 'ideas':
                        if (typeof initializeIdeasPage === 'function') {
                            initializeIdeasPage();
                        }
                        break;
                    case 'caption':
                        if (typeof initializeCaptionPage === 'function') {
                            initializeCaptionPage();
                        }
                        break;
                    case 'poster':
                        if (typeof initializePosterPage === 'function') {
                            initializePosterPage();
                        }
                        break;
                }
                
                // Update URL fragment
                window.location.hash = toolType;
                
                // Track activity
                if (typeof trackActivity === 'function') {
                    trackActivity('tool_opened', `${toolType.charAt(0).toUpperCase() + toolType.slice(1)} Tool dibuka`, 'ü§ñ');
                }
                
            } catch (error) {
                console.error('Error loading AI tool:', error);
                contentArea.innerHTML = '<div class="error">Error loading AI tool. Please try again.</div>';
            }
        }

        // Back to tools selection
        function backToTools() {
            const contentArea = document.getElementById('ai-tool-content');
            const toolsGrid = document.querySelector('.tools-grid');
            
            contentArea.classList.add('hidden');
            toolsGrid.style.display = 'grid';
            
            // Clear URL fragment
            window.location.hash = '';
        }

        // Add back button to loaded content (will be called by individual tools)
        function addBackButton() {
            const contentArea = document.getElementById('ai-tool-content');
            const existingBackBtn = contentArea.querySelector('.back-to-tools-btn');
            
            if (!existingBackBtn) {
                const backBtn = document.createElement('button');
                backBtn.className = 'btn btn-secondary back-to-tools-btn';
                backBtn.innerHTML = '‚Üê Kembali ke AI Tools';
                backBtn.onclick = backToTools;
                backBtn.style.marginBottom = '1.5rem';
                
                const firstChild = contentArea.firstElementChild;
                if (firstChild) {
                    contentArea.insertBefore(backBtn, firstChild);
                }
            }
        }

        // Export functions
        window.loadAITool = loadAITool;
        window.backToTools = backToTools;
        window.addBackButton = addBackButton;
    </script>



</body>
</html>